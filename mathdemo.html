<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <script src="math32.js"></script>
</head>
<body>
<h1>Basic Tests: Matrix/Vector Math</h1>
<script>
let s = new Scalar(10);
s.set(11);

// Testing the most important matrix stuff
function assert_eq(a,b) {
	if (JSON.stringify(a) !== JSON.stringify(b)) {
		console.trace(a,"!==",b); // Produces a stack trace
		return false;
	}
	return true;
}
// Really basic stuff
let x = new Vec(1.0,2.0);
let move = new Mat(1.0,0.0, 0.0,1.0, 1.0,0.0);
let move_inv = move.inv();
assert_eq(''+x,''+move_inv.transform(move.transform(x))); // x = AA^-1 x


let a = new Mat(1.0,2.0, -0.5,0.25, 4.0,8.0);
let b = new Mat(0.0,1.0, -1.0,-.0, -1.0,-2.0);

let ab = a.compose(b);
assert_eq(''+ab.transform(x),''+a.transform(b.transform(x))); // (AB)(x) = A(Bx)
assert_eq(''+a.compose(a.inv()),''+new Mat()); // AA^-1 = I
assert_eq(''+b.compose(b.inv()),''+new Mat()); // BB^-1 = I

// Algebra
assert_eq( // +
 ''+(a.add(b)).transform(x),
 ''+ ( a.transform(x).add(b.transform(x)) )
);
assert_eq( // -
 ''+(a.sub(b)).transform(x),
 ''+ ( a.transform(x).sub(b.transform(x)) )
);
assert_eq(''+a.mul(8.0).transform(x),''+a.transform(x).mul(8.0));

// Fancy vector methods
let y = new Vec(1,0);
assert_eq(''+y.dot(x),'1');
assert_eq(''+x.cross(x),'0');
assert_eq(''+y.cross(y),'0');
assert_eq(''+x.cross(y),'-2');

let z = new Vec(3,4);
assert_eq(''+x.add(z).dist(x), '5');
assert_eq(''+z.sq(), '25');
assert_eq(''+z.abs(), '5');
assert_eq((new Vec(100,0)).norm(),new Vec(1,0));
</script>

</body>
</html>
